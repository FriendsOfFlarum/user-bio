(()=>{var t={561:function(){(function(){var t=[].slice;String.prototype.autoLink=function(){var o,e,r,n,i,a;return i=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<(n=1<=arguments.length?t.call(arguments,0):[]).length?(r=n[0],e=function(){var t;for(o in t=[],r)a=r[o],"callback"!==o&&t.push(" "+o+"='"+a+"'");return t}().join(""),this.replace(i,(function(t,o,n){return""+o+(("function"==typeof r.callback?r.callback(n):void 0)||"<a href='"+n+"'"+e+">"+n+"</a>")}))):this.replace(i,"$1<a href='$2'>$2</a>")}}).call(this)}},o={};function e(r){var n=o[r];if(void 0!==n)return n.exports;var i=o[r]={exports:{}};return t[r].call(i.exports,i,i.exports,e),i.exports}e.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},e.d=(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},e.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";e.r(r),e.d(r,{components:()=>O});const t=flarum.core.compat["forum/app"];var o=e.n(t);const n=flarum.core.compat["common/extend"];e(561);const i=flarum.core.compat["common/utils/computed"];var a=e.n(i);const s=flarum.core.compat["forum/components/UserCard"];var c=e.n(s);const u=flarum.core.compat["common/models/User"];var l=e.n(u);const p=flarum.core.compat["common/Model"];var f=e.n(p);function d(t,o){return d=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},d(t,o)}const h=flarum.core.compat["common/Component"];var b=e.n(h);const v=flarum.core.compat["common/components/LoadingIndicator"];var g=e.n(v);const y=flarum.core.compat["common/utils/classList"];var x=e.n(y);const w=flarum.core.compat["common/utils/extractText"];var P=e.n(w),_=function(t){var e,r;function n(){return t.apply(this,arguments)||this}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,d(e,r);var i=n.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.editing=!1,this.loading=!1,this.bioMaxLength=o().forum.attribute("fof-user-bio.maxLength"),this.bioPlaceholder=o().session&&o().session.user&&o().session.user.id()===this.attrs.user.id()?o().translator.trans("fof-user-bio.forum.userbioPlaceholder"):o().translator.trans("fof-user-bio.forum.userbioPlaceholderOtherUser",{username:this.attrs.user.username()})},i.view=function(){var t,o=this.attrs.user,e=this.attrs.user.attribute("canEditBio");if(this.editing)t=m("textarea",{className:"FormControl",placeholder:P()(this.bioPlaceholder),rows:"3",maxlength:this.bioMaxLength,value:o.bio()});else{var r;if(this.loading)r=m("p",{className:"UserBio-placeholder"},g().component({size:"tiny"}));else{var n=o.bioHtml();n?r=m.trust(n):e&&(r=m("p",{className:"UserBio-placeholder"},this.bioPlaceholder))}t=m("div",{className:"UserBio-content",onclick:e?this.edit.bind(this):function(){}},r)}return m("div",{className:"UserBio "+x()({editable:e,editing:this.editing})},t)},i.edit=function(){this.editing=!0,m.redraw.sync();var t=this,o=function(o){o.shiftKey||(o.preventDefault(),t.save($(this).val()))};this.$("textarea").focus().bind("blur",o).bind("keydown","return",o),m.redraw()},i.save=function(t){var o=this,e=this.attrs.user;e.bio()!==t&&(this.loading=!0,e.save({bio:t}).catch((function(){})).then((function(){o.loading=!1,m.redraw()}))),this.editing=!1,m.redraw()},n}(b()),O={UserBio:_};o().initializers.add("fof-user-bio",(function(){l().prototype.bio=f().attribute("bio"),l().prototype.bioHtml=a()("bio",(function(t){return t?"<p>"+$("<div/>").text(t).html().replace(/\n/g,"<br>").autoLink({rel:"nofollow ugc"})+"</p>":""})),(0,n.extend)(c().prototype,"infoItems",(function(t){var o=this.attrs.user;o.attribute("canViewBio")&&t.add("bio",m(_,{user:o}),-100)}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map